<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Oops! - BudgetTrip</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #dbeafe 0%, #93c5fd 100%);
            color: #1e293b;
            overflow: hidden;
            height: 100vh;
        }

        .liquid-bg { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -1; }
        .blob { position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.5; animation: float 10s infinite ease-in-out; }
        .blob-1 { top: -10%; left: -10%; width: 500px; height: 500px; background: #60a5fa; animation-delay: 0s; }
        .blob-2 { bottom: -10%; right: -10%; width: 400px; height: 400px; background: #3b82f6; animation-delay: 2s; }
        .blob-3 { top: 40%; right: 20%; width: 300px; height: 300px; background: #0ea5e9; animation-delay: 4s; }
        @keyframes float { 0% { transform: translate(0, 0) scale(1); } 50% { transform: translate(30px, 20px) scale(1.1); } 100% { transform: translate(0, 0) scale(1); } }

        .glass-panel {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(20px);
            border-radius: 2rem;
            box-shadow: 0 15px 50px rgba(30, 58, 138, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.8);
            text-align: center;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

<div class="liquid-bg">
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>
</div>

<!-- Scrollable container for error details -->
<div class="glass-panel p-8 max-w-2xl w-full relative z-10 max-h-[90vh] overflow-y-auto">

    <div class="mb-4">
        <i class="fa-solid fa-bug text-6xl text-red-500 drop-shadow-sm opacity-90"></i>
    </div>

    <!-- Dynamic Error Status -->
    <h1 class="text-3xl font-extrabold text-slate-800 mb-1">
        <span th:text="${status} ?: 'Error'">Error</span>
    </h1>

    <!-- Short Error Summary -->
    <h2 class="text-md font-semibold text-slate-600 mb-4"
        th:text="${error} ?: 'Something went wrong.'">Unexpected Error</h2>

    <!-- Detailed Message -->
    <div class="text-xs text-left bg-red-50 border border-red-200 text-red-800 p-4 rounded-xl mb-4 font-mono shadow-inner">
        <p class="font-bold mb-1">Message:</p>
        <p th:text="${message} ?: 'No specific error message available.'"></p>

        <p th:if="${path}" class="mt-2 pt-2 border-t border-red-200">
            <span class="font-bold">Path:</span> <span th:text="${path}"></span>
        </p>
    </div>

    <!-- FULL STACK TRACE (This will show exactly where the code failed) -->
    <div th:if="${trace}" class="text-[10px] text-left bg-slate-900 text-green-400 p-4 rounded-xl mb-6 overflow-auto max-h-60 font-mono shadow-inner border border-slate-700">
        <p class="font-bold mb-2 text-white border-b border-gray-700 pb-1">Stack Trace (For Debugging):</p>
        <pre th:text="${trace}"></pre>
    </div>

    <a href="/dashboard" class="inline-block w-full py-3 rounded-xl bg-blue-600 text-white font-bold text-sm shadow-lg hover:bg-blue-700 transition transform hover:-translate-y-1">
        <i class="fa-solid fa-house mr-2"></i> Go Back to Dashboard
    </a>

</div>

</body>
</html>